<mat-accordion class="expansion-panels">
  <mat-expansion-panel *ngFor="let config of configurationOptions; trackBy: trackByConfiguration" [expanded]="config === 'default'">
    <mat-expansion-panel-header>
      <mat-panel-title>
        {{ getProfileTitle(config) }}
      </mat-panel-title>
    </mat-expansion-panel-header>

    <div class="panel-content">
      <div class="configuration-row">
        <div class="configuration-select">
          <app-searchable-multi-select
            [label]="'Configurable Endpoints'"
            [searchPlaceholder]="'Search endpoints...'"
            [options]="availableEndpointOptionsByConfiguration[config] ?? endpointOptionValues"
            [selectedValues]="resolvedEndpointsByConfiguration[config]"
            [emptyMessage]="'No endpoints found'"
            (selectedValuesChange)="onEndpointsChange(config, $event)">
          </app-searchable-multi-select>
        </div>
      </div>
    </div>
  </mat-expansion-panel>
</mat-accordion>
