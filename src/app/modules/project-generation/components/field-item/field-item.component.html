<div class="field-item">
  <div class="field-type-group">
    <label class="field-label">Field Type</label>
    <mat-form-field appearance="outline" class="field-type-select">
      <mat-select
        [(ngModel)]="field.type"
        (selectionChange)="onTypeChange()">
        <mat-option *ngFor="let type of fieldTypes" [value]="type">{{ type }}</mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <div class="field-name-group">
    <label class="field-label">Field name</label>
    <input
      class="field-input"
      [(ngModel)]="field.name"
      (ngModelChange)="onNameChange()"
      [disabled]="field.primaryKey"
      placeholder="Field name">
    <div class="field-error" *ngIf="field.nameError">{{ field.nameError }}</div>
  </div>

  <div class="field-max-length-group" *ngIf="field.type === 'String'">
    <label class="field-label">Max length</label>
    <input
      class="field-input field-input-small"
      type="number"
      [(ngModel)]="field.maxLength"
      (ngModelChange)="onFieldUpdate()"
      placeholder="255">
  </div>

  <div class="field-constraints">
    <mat-checkbox
      *ngIf="field.primaryKey"
      [(ngModel)]="field.primaryKey"
      [disabled]="true"
      color="primary"
      class="constraint-checkbox">
      Primary key
    </mat-checkbox>

    <mat-checkbox
      *ngIf="!field.primaryKey"
      [(ngModel)]="field.required"
      (change)="onFieldUpdate()"
      color="primary"
      class="constraint-checkbox">
      Required
    </mat-checkbox>

    <mat-checkbox
      *ngIf="!field.primaryKey"
      [(ngModel)]="field.unique"
      (change)="onFieldUpdate()"
      color="primary"
      class="constraint-checkbox">
      Unique
    </mat-checkbox>
  </div>

  <div class="field-actions">
    <button
      mat-icon-button
      class="action-btn delete-btn"
      type="button"
      *ngIf="canDelete"
      (click)="onDelete()"
      aria-label="Delete field">
      <mat-icon>delete</mat-icon>
    </button>
    <div class="reorder-controls" *ngIf="canDelete">
      <button
        mat-icon-button
        class="action-btn reorder-btn"
        type="button"
        [disabled]="!canMoveUp"
        (click)="onMoveUp()"
        aria-label="Move field up">
        <mat-icon>keyboard_arrow_up</mat-icon>
      </button>
      <button
        mat-icon-button
        class="action-btn reorder-btn"
        type="button"
        [disabled]="!canMoveDown"
        (click)="onMoveDown()"
        aria-label="Move field down">
        <mat-icon>keyboard_arrow_down</mat-icon>
      </button>
    </div>
  </div>
</div>
