<div class="field-item">
  <mat-form-field appearance="outline" class="field-type-select">
    <mat-label>Field Type</mat-label>
    <mat-select
      [(ngModel)]="field.type"
      (selectionChange)="onTypeChange()">
      <mat-option *ngFor="let type of fieldTypes" [value]="type">{{ type }}</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field appearance="outline" class="field-name-input">
    <mat-label>Field name</mat-label>
    <input
      matInput
      [(ngModel)]="field.name"
      (ngModelChange)="onNameChange()"
      [disabled]="field.primaryKey"
      placeholder="Field name">
    <mat-error *ngIf="field.nameError">{{ field.nameError }}</mat-error>
  </mat-form-field>

  <mat-form-field appearance="outline" class="field-max-length-input" *ngIf="field.type === 'String'">
    <mat-label>Max length</mat-label>
    <input
      matInput
      type="number"
      [(ngModel)]="field.maxLength"
      (ngModelChange)="onFieldUpdate()"
      placeholder="255">
  </mat-form-field>

  <div class="field-constraints">
    <mat-checkbox
      *ngIf="field.primaryKey"
      [(ngModel)]="field.primaryKey"
      [disabled]="true"
      color="primary"
      class="constraint-checkbox">
      Primary key
    </mat-checkbox>

    <mat-checkbox
      *ngIf="!field.primaryKey"
      [(ngModel)]="field.required"
      (change)="onFieldUpdate()"
      color="primary"
      class="constraint-checkbox">
      Required
    </mat-checkbox>

    <mat-checkbox
      *ngIf="!field.primaryKey"
      [(ngModel)]="field.unique"
      (change)="onFieldUpdate()"
      color="primary"
      class="constraint-checkbox">
      Unique
    </mat-checkbox>
  </div>

  <div class="field-actions">
    <button
      mat-icon-button
      class="action-btn delete-btn"
      type="button"
      *ngIf="canDelete"
      (click)="onDelete()"
      aria-label="Delete field">
      <mat-icon>delete</mat-icon>
    </button>
    <div class="reorder-controls" *ngIf="canDelete">
      <button
        mat-icon-button
        class="action-btn reorder-btn"
        type="button"
        [disabled]="!canMoveUp"
        (click)="onMoveUp()"
        aria-label="Move field up">
        <mat-icon>keyboard_arrow_up</mat-icon>
      </button>
      <button
        mat-icon-button
        class="action-btn reorder-btn"
        type="button"
        [disabled]="!canMoveDown"
        (click)="onMoveDown()"
        aria-label="Move field down">
        <mat-icon>keyboard_arrow_down</mat-icon>
      </button>
    </div>
  </div>
</div>
