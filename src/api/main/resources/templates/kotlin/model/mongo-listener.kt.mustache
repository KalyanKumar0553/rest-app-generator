package {{packageName}}

import org.springframework.data.mongodb.core.mapping.event.AbstractMongoEventListener
import org.springframework.data.mongodb.core.mapping.event.BeforeConvertEvent
import org.springframework.stereotype.Component
import {{sequenceServicePackage}}.PrimarySequenceService

@Component
class {{entityName}}Listener(
    private val primarySequenceService: PrimarySequenceService
) : AbstractMongoEventListener<{{entityName}}>() {

    override fun onBeforeConvert(event: BeforeConvertEvent<{{entityName}}>) {
        if (event.source.id == null) {
{{#intId}}            event.source.id = primarySequenceService.getNextValue().toInt()
{{/intId}}{{^intId}}            event.source.id = primarySequenceService.getNextValue()
{{/intId}}        }
    }
}
